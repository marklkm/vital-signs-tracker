<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="favicon.svg" type="image/svg+xml" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vitals Tracker + Dementia Care</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <!-- App CSS -->
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <a class="visually-hidden-focusable" href="#main-content"
      >Skip to content</a
    >
    <h1 class="visually-hidden">Vitals Tracker + Dementia Care</h1>

    <!-- Navbar -->
    <nav class="navbar bg-light px-3 border-bottom sticky-top">
      <button
        class="btn btn-accessible"
        type="button"
        data-bs-toggle="offcanvas"
        data-bs-target="#sidebar"
        aria-controls="sidebar"
        aria-label="Toggle menu"
      >
        ☰
      </button>

      <a class="navbar-brand ms-3 d-flex align-items-center" href="#">
        <img
          src="favicon.svg"
          alt="Vital Signs Tracker logo"
          width="32"
          height="32"
          class="me-2"
        />
        <span class="fw-semibold">Vitals Tracker + Dementia Care</span>
      </a>
    </nav>

    <!-- Sidebar (Offcanvas) -->
    <div
      class="offcanvas offcanvas-start"
      tabindex="-1"
      id="sidebar"
      aria-labelledby="sidebarLabel"
    >
      <div class="offcanvas-header">
        <h2 class="offcanvas-title h5" id="sidebarLabel">Menu</h2>
        <button
          id="closeSidebar"
          type="button"
          class="btn-close"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>
      <div class="offcanvas-body">
        <ul class="nav flex-column mb-4">
          <li class="nav-item">
            <a class="nav-link active" href="#">Vitals</a>
          </li>
        </ul>

        <div class="vstack gap-3">
          <div class="form-check form-switch mb-0">
            <input
              class="form-check-input"
              type="checkbox"
              id="darkModeSwitch"
            />
            <label class="form-check-label" for="darkModeSwitch"
              >Dark Mode</label
            >
          </div>

          <div class="form-check form-switch mb-0">
            <input
              class="form-check-input"
              type="checkbox"
              id="largeTextSwitch"
            />
            <label class="form-check-label" for="largeTextSwitch"
              >Large Text</label
            >
          </div>

          <div class="form-check form-switch mt-3">
            <input
              class="form-check-input"
              type="checkbox"
              id="dyslexicFontSwitch"
            />
            <label class="form-check-label" for="dyslexicFontSwitch">
              Dyslexic-Friendly Font
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <main class="container-fluid p-4" id="main-content">
      <!-- App Introduction -->
      <section class="app-intro mb-5 p-4 rounded shadow-sm bg-light">
        <h2 class="text-primary fw-bold mb-3">
          About Vitals Tracker + Dementia Care
        </h2>
        <p class="lead">
          <strong>Vitals Tracker + Dementia Care</strong> is an accessible tool
          designed to help caregivers, nurses, and family members easily record
          and monitor vital signs and wellbeing for people living with dementia.
        </p>
        <p>
          The app focuses on simplicity, calm visuals, and large clear buttons.
          It supports
          <strong>Dark Mode</strong>, <strong>Large Text</strong>, and a
          <strong>Dyslexic-Friendly Font</strong> for easier reading and reduced
          visual stress.
        </p>
        <p>
          All information is stored locally on your device for privacy and
          safety — no internet connection is required. You can record
          <em>blood pressure, pulse, temperature, oxygen levels</em>, and more,
          while also logging
          <em>mood check-ins, reminders, caregiver notes,</em> and
          <em>familiar faces</em> to support memory and comfort.
        </p>
        <p class="mb-0">
          This application was created to make dementia care more
          person-centered and accessible, ensuring a calm, respectful, and
          supportive experience for both patients and caregivers.
        </p>
      </section>

      <!-- Add New Patient -->
      <section class="form-section mb-5">
        <h2>Add New Patient</h2>
        <form id="patientForm" class="row g-3 mb-4" novalidate>
          <div class="col-md-4 col-12">
            <label for="patientName" class="form-label">Patient Name</label>
            <input type="text" id="patientName" class="form-control" required />
          </div>
          <div class="col-md-4 col-12">
            <label for="dob" class="form-label">Date of Birth (DOB)</label>
            <input type="date" id="dob" class="form-control" required />
          </div>
          <div class="col-md-4 col-12">
            <label for="patientImage" class="form-label"
              >Patient Photo (optional)</label
            >
            <input
              type="file"
              id="patientImage"
              accept="image/*"
              class="form-control"
            />
          </div>
          <div class="col-md-4 col-12">
            <button type="submit" class="btn btn-success w-100 mt-4">
              Add Patient
            </button>
          </div>
        </form>

        <!-- Select Patient -->
        <div class="mb-4">
          <label for="selectPatient" class="form-label">Select Patient</label>
          <select id="selectPatient" class="form-select">
            <option value="">-- Select a patient --</option>
          </select>
        </div>

        <!-- Current Patient Info -->
        <div
          id="patientInfoDisplay"
          class="patient-info-box d-none text-center mx-auto d-flex flex-column justify-content-center align-items-center shadow-sm"
          style="min-height: 40vh; max-width: 420px"
        >
          <h3 class="fw-bold mb-3">Current Patient</h3>
          <img
            id="patientPhoto"
            alt="Patient photo"
            class="img-thumbnail mb-3 d-none mx-auto d-block"
            style="
              width: 120px;
              height: 120px;
              border-radius: 50%;
              object-fit: cover;
            "
          />
          <p class="mb-1">
            <strong>Name:</strong> <span id="displayPatientName"></span>
          </p>
          <p><strong>DOB:</strong> <span id="displayPatientDOB"></span></p>
        </div>
      </section>

      <!-- Vital Signs Form -->
      <section class="form-section mb-5">
        <h2>Add Vital Signs Entry</h2>
        <form id="vitalForm" class="row g-3 mb-5">
          <div class="col-md-4 col-12">
            <label for="systolic" class="form-label">Systolic BP</label>
            <input type="number" id="systolic" class="form-control" required />
          </div>
          <div class="col-md-4 col-12">
            <label for="diastolic" class="form-label">Diastolic BP</label>
            <input type="number" id="diastolic" class="form-control" required />
          </div>
          <div class="col-md-4 col-12">
            <label for="spo2" class="form-label">SpO₂ (%)</label>
            <input type="number" id="spo2" class="form-control" required />
          </div>
          <div class="col-md-4 col-12">
            <label for="pulse" class="form-label">Pulse (bpm)</label>
            <input type="number" id="pulse" class="form-control" required />
          </div>
          <div class="col-md-4 col-12">
            <label for="temperature" class="form-label">Temperature (°C)</label>
            <input
              type="number"
              id="temperature"
              class="form-control"
              step="0.1"
              required
            />
          </div>
          <div class="col-md-4 col-12">
            <label for="time" class="form-label">Time of Measurement</label>
            <input
              type="datetime-local"
              id="time"
              class="form-control"
              required
            />
            <small id="formattedTime" class="text-muted"></small>
          </div>

          <div class="col-12">
            <button type="submit" class="btn btn-primary w-100">
              Save Vital Signs
            </button>
          </div>
        </form>
      </section>

      <!-- Recorded Vitals Table -->
      <section class="mb-5">
        <h2>Recorded Vital Signs</h2>
        <div class="table-responsive">
          <table class="table table-striped table-bordered align-middle">
            <thead class="table-light">
              <tr>
                <th>Time</th>
                <th>Systolic</th>
                <th>Diastolic</th>
                <th>SpO₂ %</th>
                <th>Pulse</th>
                <th>Temperature (°C)</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="entriesTable"></tbody>
          </table>
        </div>
      </section>

      <!-- Cognitive Check-in -->
      <section class="form-section mb-5">
        <h2>Cognitive Check-in</h2>
        <form id="cognitiveForm" class="row g-3 mb-3">
          <div class="col-md-3">
            <label for="mood" class="form-label">Mood</label>
            <select id="mood" class="form-select">
              <option value="">—</option>
              <option>Happy</option>
              <option>Calm</option>
              <option>Confused</option>
              <option>Agitated</option>
              <option>Sad</option>
            </select>
          </div>
          <div class="col-md-3">
            <label for="memory" class="form-label">Memory</label>
            <select id="memory" class="form-select">
              <option value="">—</option>
              <option>Good</option>
              <option>Okay</option>
              <option>Poor</option>
            </select>
          </div>
          <div class="col-md-6">
            <label for="notes" class="form-label">Notes</label>
            <input
              id="notes"
              class="form-control"
              placeholder="Short observation…"
            />
          </div>
          <div class="col-12">
            <button class="btn btn-primary">Save Check-in</button>
          </div>
        </form>

        <div class="table-responsive">
          <table class="table table-striped table-bordered align-middle">
            <thead class="table-light">
              <tr>
                <th>Date</th>
                <th>Mood</th>
                <th>Memory</th>
                <th>Notes</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="cognitiveTable"></tbody>
          </table>
        </div>
        <button id="exportCognitiveCSV" class="btn btn-outline-dark mt-2">
          Export Cognitive Logs CSV
        </button>
      </section>

      <!-- Reminders -->
      <section class="form-section mb-5">
        <h2>Reminders</h2>
        <div class="mb-3">
          <label for="reminderText" class="form-label">Add Reminder</label>
          <div class="input-group">
            <input
              id="reminderText"
              class="form-control"
              type="text"
              placeholder="e.g., Take medication at 9 AM"
              aria-describedby="reminderHelp"
            />
            <button id="addReminder" class="btn btn-outline-primary">
              Add
            </button>
          </div>
          <div id="reminderHelp" class="form-text">
            Type a reminder and click “Add” to include it in the list.
          </div>
        </div>

        <ul id="reminderList" class="list-group"></ul>
      </section>

      <!-- Familiar Faces -->
      <section class="form-section mb-5">
        <h2>Familiar Faces</h2>
        <div class="row g-3 align-items-end mb-3">
          <div class="col-md-4">
            <label for="faceName" class="form-label">Name</label>
            <input
              id="faceName"
              class="form-control"
              placeholder="Person’s name"
            />
          </div>
          <div class="col-md-4">
            <label for="faceImage" class="form-label">Photo</label>
            <input
              type="file"
              id="faceImage"
              accept="image/*"
              class="form-control"
            />
          </div>
          <div class="col-md-4">
            <button id="addFace" class="btn btn-outline-success w-100">
              Add Face
            </button>
          </div>
        </div>
        <div id="facesGrid" class="d-flex flex-wrap gap-3"></div>
      </section>

      <!-- Caregiver Notes -->
      <section class="form-section mb-5">
        <h2>Caregiver Notes</h2>
        <p class="mb-2">
          <small class="text-muted caregiver-hint"
            >Brief notes from caregivers or nurses.</small
          >
        </p>
        <div class="input-group mb-3">
          <div class="mb-3">
            <label for="caregiverNotes" class="form-label"
              >Caregiver Note</label
            >
            <textarea
              id="caregiverNotes"
              rows="2"
              class="form-control"
              placeholder="Enter a brief note or observation…"
              aria-describedby="caregiverHelp"
            ></textarea>
            <div id="caregiverHelp" class="form-text">
              Write a short note or observation about the patient’s wellbeing.
            </div>
          </div>

          <button id="saveCaregiverNote" class="btn btn-outline-dark">
            Save Note
          </button>
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-bordered align-middle">
            <thead class="table-light">
              <tr>
                <th>Date</th>
                <th>Note</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="caregiverTable"></tbody>
          </table>
        </div>
        <button id="exportCaregiverCSV" class="btn btn-outline-dark mt-2">
          Export Notes CSV
        </button>
      </section>

      <!-- Relaxing Music -->
      <section class="form-section mb-5">
        <h2>Relaxing Music</h2>
        <div class="row g-3 align-items-end mb-3">
          <div class="col-md-8">
            <label for="musicFile" class="form-label"
              >Add MP3 / M4A / WAV</label
            >
            <input
              type="file"
              id="musicFile"
              accept="audio/*"
              class="form-control"
            />
          </div>
        </div>
        <div
          id="musicList"
          class="list-group mb-3"
          aria-label="Music tracks list"
        ></div>

        <audio
          id="musicPlayer"
          controls
          class="w-100"
          aria-label="Music player"
        ></audio>
        <p id="musicDescription" class="form-text text-muted mt-2">
          Use the controls above to play relaxing music. All tracks are stored
          locally for privacy and can help promote calmness for patients with
          dementia.
        </p>

        <button id="deleteMusic" class="btn btn-outline-danger mt-2">
          Delete Selected Track
        </button>
      </section>

      <!-- Manage Data -->
      <section class="mt-5">
        <h2>Manage Data</h2>
        <div class="row g-3">
          <div class="col-md-3 col-12">
            <button id="exportCSV" class="btn btn-warning w-100">
              Export All Patients to CSV
            </button>
          </div>
          <div class="col-md-3 col-12">
            <button id="exportCurrentPatient" class="btn btn-dark w-100">
              Export Current Patient to CSV
            </button>
          </div>
          <div class="col-md-3 col-12">
            <button id="deletePatient" class="btn btn-danger w-100">
              Delete Current Patient
            </button>
          </div>
          <div class="col-md-3 col-12">
            <button id="backupData" class="btn btn-secondary w-100">
              Download Backup (JSON)
            </button>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="bg-light text-center text-lg-start mt-5 border-top">
      <div class="container py-3">
        <div class="row align-items-center">
          <div class="col-md-6 text-md-start text-center mb-2 mb-md-0">
            <p class="mb-0">
              <strong>Vitals Tracker + Dementia Care</strong> — an accessible
              health tool. <br /><small
                >All data is stored locally for privacy.</small
              >
            </p>
          </div>

          <div class="col-md-6 text-md-end text-center">
            <a href="#" class="text-decoration-none me-3">
              <i class="bi bi-github"></i> GitHub
            </a>
            <a href="mailto:info@example.com" class="text-decoration-none">
              <i class="bi bi-envelope"></i> Contact
            </a>
          </div>
        </div>
      </div>

      <div
        class="text-center py-2 border-top small"
        style="background-color: #f8f9fa"
      >
        &copy; <span id="year"></span> Vitals Tracker + Dementia Care. All
        rights reserved.
      </div>
    </footer>

    <script>
      document.getElementById("year").textContent = new Date().getFullYear();
    </script>
    <!-- Bootstrap JS bundle (required for dropdown, offcanvas, etc.) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Dexie (for IndexedDB) -->
    <script src="https://unpkg.com/dexie@3.2.5/dist/dexie.min.js"></script>

    <!-- Custom script -->
    <script src="scripts.js"></script>
  </body>
</html>
