<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="favicon.svg" type="image/svg+xml" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vital Signs Tracker</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <h1 class="visually-hidden">Vital Signs Tracker</h1>

    <!-- Navbar -->
    <nav class="navbar navbar-light bg-light px-3">
      <button
        class="btn btn-outline-secondary"
        type="button"
        data-bs-toggle="offcanvas"
        data-bs-target="#sidebar"
        aria-controls="sidebar"
        aria-label="Open menu"
      >
        ☰
      </button>

      <a class="navbar-brand ms-3 d-flex align-items-center" href="#">
        <img
          src="favicon.svg"
          alt="Vital Signs Tracker logo"
          width="32"
          height="32"
          class="me-2"
        />
        <span>Vital Signs Tracker</span>
      </a>
    </nav>

    <!-- Sidebar -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebar">
      <div class="offcanvas-header">
        <h2 class="offcanvas-title h5">Menu</h2>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>
      <div class="offcanvas-body">
        <ul class="nav flex-column mb-4">
          <li class="nav-item">
            <a class="nav-link active" href="#">Vitals</a>
          </li>
        </ul>

        <div class="form-check form-switch">
          <input class="form-check-input" type="checkbox" id="darkModeSwitch" />
          <label class="form-check-label" for="darkModeSwitch">
            Dark Mode
          </label>
        </div>

        <div class="form-check form-switch mt-3">
          <input
            class="form-check-input"
            type="checkbox"
            id="largeTextSwitch"
          />
          <label class="form-check-label" for="largeTextSwitch">
            Large Text Mode
          </label>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <main class="container-fluid p-4" id="main-content">
      <!-- Add New Patient -->
      <section class="form-section mb-5">
        <h2>Add New Patient</h2>
        <form id="patientForm" class="row g-3 mb-4">
          <div class="col-md-4 col-12">
            <label for="patientName" class="form-label">Patient Name</label>
            <input type="text" id="patientName" class="form-control" required />
          </div>
          <div class="col-md-4 col-12">
            <label for="dob" class="form-label">Date of Birth (DOB)</label>
            <input type="date" id="dob" class="form-control" required />
          </div>
          <div class="col-md-4 col-12">
            <label for="patientImage" class="form-label">
              Patient Photo (optional)
            </label>
            <input
              type="file"
              id="patientImage"
              accept="image/*"
              class="form-control"
            />
          </div>
          <div class="col-md-4 col-12">
            <button type="submit" class="btn btn-success w-100 mt-4">
              Add Patient
            </button>
          </div>
        </form>

        <!-- Select Patient -->
        <div class="mb-4">
          <label for="selectPatient" class="form-label">Select Patient</label>
          <select id="selectPatient" class="form-select">
            <option value="">-- Select a patient --</option>
          </select>
        </div>

        <!-- Current Patient Info -->
        <div
          id="patientInfoDisplay"
          class="patient-info-box d-none text-center mx-auto d-flex flex-column justify-content-center align-items-center shadow-sm"
          style="min-height: 60vh; max-width: 400px"
        >
          <h3 class="fw-bold mb-3">Current Patient</h3>

          <img
            id="patientPhoto"
            src="https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png"
            alt="Patient photo"
            class="img-thumbnail mb-3 d-none mx-auto d-block"
            style="
              width: 120px;
              height: 120px;
              border-radius: 50%;
              object-fit: cover;
            "
          />

          <p class="mb-1">
            <strong>Name:</strong> <span id="displayPatientName"></span>
          </p>
          <p><strong>DOB:</strong> <span id="displayPatientDOB"></span></p>
        </div>
      </section>

      <!-- Vital Signs Form -->
      <section class="form-section mb-5">
        <h2>Add Vital Signs Entry</h2>
        <form id="vitalForm" class="row g-3 mb-5">
          <div class="col-md-4 col-12">
            <label for="systolic" class="form-label">Systolic BP</label>
            <input type="number" id="systolic" class="form-control" required />
          </div>
          <div class="col-md-4 col-12">
            <label for="diastolic" class="form-label">Diastolic BP</label>
            <input type="number" id="diastolic" class="form-control" required />
          </div>
          <div class="col-md-4 col-12">
            <label for="spo2" class="form-label">SpO₂ (%)</label>
            <input type="number" id="spo2" class="form-control" required />
          </div>
          <div class="col-md-4 col-12">
            <label for="pulse" class="form-label">Pulse (bpm)</label>
            <input type="number" id="pulse" class="form-control" required />
          </div>
          <div class="col-md-4 col-12">
            <label for="temperature" class="form-label">Temperature (°C)</label>
            <input
              type="number"
              id="temperature"
              class="form-control"
              step="0.1"
              required
            />
          </div>
          <div class="col-md-4 col-12">
            <label for="time" class="form-label">Time of Measurement</label>
            <input
              type="datetime-local"
              id="time"
              class="form-control"
              required
            />
            <small id="formattedTime" class="text-muted"></small>
          </div>

          <div class="col-12">
            <button type="submit" class="btn btn-primary w-100">
              Save Vital Signs
            </button>
          </div>
        </form>
      </section>

      <!-- Recorded Vitals Table -->
      <section>
        <h2>Recorded Vital Signs</h2>
        <div class="table-responsive">
          <table class="table table-striped table-bordered align-middle">
            <thead>
              <tr>
                <th>Time</th>
                <th>Systolic</th>
                <th>Diastolic</th>
                <th>SpO₂ %</th>
                <th>Pulse</th>
                <th>Temperature (°C)</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="entriesTable"></tbody>
          </table>
        </div>
      </section>

      <!-- Export / Delete Buttons -->
      <section class="mt-5">
        <h2>Manage Data</h2>
        <button id="exportCSV" class="btn btn-warning w-100 mb-3">
          Export All Patients to CSV
        </button>
        <button id="exportCurrentPatient" class="btn btn-info w-100 mb-3">
          Export Current Patient to CSV
        </button>
        <button id="deletePatient" class="btn btn-danger w-100 mb-3">
          Delete Current Patient
        </button>
        <button id="backupData" class="btn btn-secondary w-100">
          Download Backup (JSON)
        </button>
      </section>
    </main>

    <!-- Footer -->
    <footer class="bg-light text-center text-lg-start mt-5 border-top">
      <div class="container py-3">
        <div class="row align-items-center">
          <div class="col-md-6 text-md-start text-center mb-2 mb-md-0">
            <p class="mb-0">
              <strong>Vital Signs Tracker</strong> — an accessible health
              monitoring app.<br />
              <small>All data is stored locally for privacy.</small>
            </p>
          </div>

          <div class="col-md-6 text-md-end text-center">
            <a
              href="https://github.com/marklkm/vital-signs-tracker"
              class="text-decoration-none me-3"
              aria-label="View project on GitHub"
            >
              <i class="bi bi-github"></i> GitHub
            </a>
            <a
              href="mailto:info@vital-signs-tracker.com"
              class="text-decoration-none"
              aria-label="Contact support via email"
            >
              <i class="bi bi-envelope"></i> Contact
            </a>
          </div>
        </div>
      </div>

      <div
        class="text-center py-2 border-top small"
        style="background-color: #f8f9fa"
      >
        &copy; <span id="year"></span> Vital Signs Tracker. All rights reserved.
      </div>
    </footer>

    <script>
      document.getElementById("year").textContent = new Date().getFullYear();
    </script>

    <!-- Bootstrap Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JavaScript -->
    <script src="scripts.js"></script>
  </body>
</html>
